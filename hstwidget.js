/*!
 * hstwidget.js v1.0.1
 * Copyright 2014-2018, hstcalculator.ca
 *
 * For suggestions and any issues please contact us at:
 * https://hstcalculator.ca/contact/
 */
(function(){var c;if(window.jQuery===undefined||window.jQuery.fn.jquery!=="3.2.1"){var d=document.createElement("script");d.setAttribute("type","text/javascript");d.setAttribute("src","https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js");if(d.readyState){d.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded"){b()}}}else{d.onload=b}(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(d)}else{c=window.jQuery;a()}function b(){c=window.jQuery.noConflict(true);a()}function a(){c(document).ready(function(i){var e=i("#calcwidgetscript").attr("src");console.log(e);var g=e.split("/").slice(0,-1).join("/");console.log(g);var f=i("<link>",{rel:"stylesheet",type:"text/css",href:g+"/cw-style.css"});f.appendTo("head");var h=g+"/hst.php?"+setParameters()+"&callback=?";i.getJSON(h,function(j){i("#cw-calc").html(j.html)}).fail(function(l,m,j){var k=m+", "+j;console.log("Request Failed: "+k)}).done(function(){if(typeof i("#province").val()==="undefined"){selectedProv=i("#SingleProvince").val()}else{loadProvinces(i);selectedProv=i("#province").val()}setRatesLabels(i);i(".decimal").keydown(function(j){if(!(isDecimalKey(j,this.value))){j.preventDefault()}});i(".decimal").keyup(function(j){this.value=this.value.replace(",",".");if(isNaN(this.value)||this.value==""){i(".decimal").val("");return}calculateHST(i,this.id,parseFloat(this.value),HSTRates[selectedProv].hstRate,HSTRates[selectedProv].federalRate)});i(".clear").click(function(j){j.preventDefault();i(".decimal").val("")});i("#province").change(function(){i(".decimal").val("");selectedProv=i("#province").val();setRatesLabels(i)})})})}})();function setRatesLabels(a){a("#hstRate").html(HSTRates[selectedProv].hstRate);a("#federalRate").html(HSTRates[selectedProv].federalRate);a("#provincialRate").html(HSTRates[selectedProv].provRate)}function setParameters(){var b=[];var c=document.getElementById("calc-settings");for(var a=0;a<c.attributes.length;a++){attr=c.attributes[a];if(/^data-/.test(attr.nodeName)){key=attr.nodeName.replace(/^data-/,"");value=attr.nodeValue;b.push(key+"="+value)}}return encodeURI(b.join("&"))}var provinces=[{provinceName:"New Brunswick",abbreviation:"NB"},{provinceName:"Newfoundland and Labrador",abbreviation:"NL"},{provinceName:"Nova Scotia",abbreviation:"NS"},{provinceName:"Ontario",abbreviation:"ON"},{provinceName:"Prince Edward Island",abbreviation:"PE"}];var HSTRates=[];HSTRates.NB={hstRate:15,federalRate:5,provRate:10};HSTRates.NL={hstRate:15,federalRate:5,provRate:10};HSTRates.NS={hstRate:15,federalRate:5,provRate:10};HSTRates.ON={hstRate:13,federalRate:5,provRate:8};HSTRates.PE={hstRate:15,federalRate:5,provRate:10};function loadProvinces(a){a("#province").empty();SingleProvince=a("#SingleProvince").val();if(SingleProvince=="ALL"){a.each(provinces,function(b,c){if(c.abbreviation=="NON"){a("#province").append("<option disabled value='NON'></option>")}else{a("#province").append("<option value='"+c.abbreviation+"'> "+c.provinceName+"</option>")}})}}function calculateHST(f,h,e,g,d){var c=0,a=0,b=0;switch(h){case"HST":b=e;a=b*100/g;c=a+b;break;case"HSTinclusive":c=e;b=c*g/(100+g);a=c-b;break;case"HSTexclusive":a=e;b=a*g/100;c=a+b;break}b=round2TwoDecimals(b);federalPart=b/g*d;provPart=b-round2TwoDecimals(federalPart);if(h!="HSTexclusive"){f("#HSTexclusive").val(round2TwoDecimals(a))}if(h!="HSTinclusive"){f("#HSTinclusive").val(round2TwoDecimals(c))}if(h!="HST"){f("#HST").val(round2TwoDecimals(b))}f("#Federal").val(round2TwoDecimals(federalPart));f("#Provincial").val(round2TwoDecimals(provPart))}function isIntegerKey(a){var b=a.which||a.which||event.keyCode;var c=(b==8||b==9||b==46||(b>=35&&b<=40)||(b>=48&&b<=57)||(b>=96&&b<=105));return c}function isDecimalKey(c,b){var a=(c.which)?c.which:c.keyCode;if((a>=48&&a<=57)||(a>=96&&a<=105)||a==110||a==190||a==44||a==188||a==8||a==9||(35<=a&&a<=40)||a==46){if(a==110||a==190||a==44||a==188){if(b.indexOf(".")>-1||b.indexOf(",")>-1||b.length==0){return false}}return true}return false}function radioValue(b){var c="";var e=document.getElementsByName(b);for(var a=0,d=e.length;a<d;a++){if(e[a].checked){c=e[a].value}}return c}function round2TwoDecimals(a){return Math.round(a*100)/100};
